{"version":3,"sources":["../../src/pages/perfil/perfil.module.ts","../../src/pages/perfil/perfil.ts"],"names":[],"mappings":"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","file":"0.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { PerfilPage } from './perfil';\n\n@NgModule({\n  declarations: [\n    PerfilPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(PerfilPage),\n  ],\n})\nexport class PerfilPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/perfil/perfil.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams , App} from 'ionic-angular';\nimport { AngularFireDatabase } from 'angularfire2/database';\nimport { AngularFireAuth } from 'angularfire2/auth';\nimport { Observable } from 'rxjs/Observable';\nimport {HomePage} from \"../home/home\";\nimport {TabPage} from \"../tab/tab\";\nimport {OpcoespagePage} from \"../opcoespage/opcoespage\";\nimport {Camera, CameraOptions} from \"@ionic-native/camera\"\nimport {config } from '../../app/app.module';\nimport {storage, initializeApp} from 'firebase';\nimport { ActionSheetController } from 'ionic-angular';\n\n\n@IonicPage()\n@Component({\n  selector: 'page-perfil',\n  templateUrl: 'perfil.html',\n})\nexport class PerfilPage {\n  usuario: Observable<any[]>; \n  userID:any;\n  photo = null;\n\n  constructor(private camera: Camera,public navCtrl: NavController, public navParams: NavParams, private afAuth: AngularFireAuth, private database : AngularFireDatabase, private app: App, public actionSheetCtrl: ActionSheetController ) {\n    this.afAuth.authState.subscribe(data => {\n      this.userID = data.uid;\n      //const picture = storage().ref('profile/' + this.userID);    \n      //this.photo = picture.getDownloadURL();\n      if (data && data.email && data.uid) {\n        this.usuario = database.object(\"users/\" + data.uid).valueChanges();\n        \n      }\n    });\n       \n  }\n\n  escolhaFoto() {\n    let actionSheet = this.actionSheetCtrl.create({\n      title: 'Escolha a ação',\n      buttons: [\n        {\n          text: 'Câmera',\n          role: 'camera',\n          handler: () => {\n            this.takePhotoWithCamera()\n          }\n        },{\n          text: 'Album',\n          role: 'album',\n          handler: () => {\n            this.takePhotoWithAlbum()\n          }\n        }\n      ]\n    });\n    actionSheet.present();\n  }\n\n  \n\n  \n  opcao(){\n    this.navCtrl.push(OpcoespagePage);\n  }\n  mudarImg(){\n    console.log(\"clicou na imagem\")\n  }\n\n  async takePhotoWithCamera(){\n    try{\n    \n\n     const option: CameraOptions = {\n       quality: 50,\n       targetHeight: 600,\n       targetWidth:600,\n       destinationType: this.camera.DestinationType.DATA_URL,\n       encodingType: this.camera.EncodingType.JPEG,\n       mediaType: this.camera.MediaType.PICTURE,\n     }\n     const result = await this.camera.getPicture(option);\n\n     const image = 'data:image/jpeg;base64,' + result;\n\n     const picture = storage().ref('profile/' + this.userID);\n     picture.putString(image, 'data_url');\n     this.savephotoURL();\n   \n\n   }\n   \n   catch(e){\n     console.error(e);\n\n   }\n  }\n  \n\n  async takePhotoWithAlbum(){\n    try{\n    \n\n     const option: CameraOptions = {\n       quality: 50,\n       targetHeight: 600,\n       targetWidth:600,\n       destinationType: this.camera.DestinationType.DATA_URL,\n       encodingType: this.camera.EncodingType.JPEG,\n       mediaType: this.camera.MediaType.PICTURE,\n       sourceType: 0\n     }\n     const result = await this.camera.getPicture(option);\n\n     const image = 'data:image/jpeg;base64,' + result;\n\n     const picture = storage().ref('profile/' + this.userID);\n     picture.putString(image, 'data_url');\n     this.savephotoURL();\n   \n\n   }\n   \n   catch(e){\n     console.error(e);\n\n   }\n  }\n\n  atualizarPhoto(){\n    if(this.photo != null){\n      this.database.object(\"users/\" + this.userID).update({\n        //img: this.photo\n      });\n    }\n  }\n  savephotoURL(){\n    storage().ref('profile/' + this.userID).getDownloadURL().then(function(url){\n    console.log(\"the URL Image is: \" + url);\n    let imageURL = url\n    return imageURL\n  }).then((imageURL) => {\n    this.database.object(\"users/\" + this.userID).update({\n      img: imageURL\n    });\n    });\n  }\n\n  ionViewDidLoad() {\n\n    \n    console.log('ionViewDidLoad PerfilPage');\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/perfil/perfil.ts"],"sourceRoot":""}